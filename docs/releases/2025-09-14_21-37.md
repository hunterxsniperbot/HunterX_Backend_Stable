# HunterX ‚Äî Release 2025-09-14 21:37 (develop)

## Resumen
- Consolidaci√≥n de **.env** y carga fiable (dotenv √∫nico en `index.js`).
- **/salud** nivel pro: API-first con fallback, auto-refresh sin flicker, ignora ‚Äúmessage is not modified‚Äù, modo visible (DEMO/REAL), providers deshabilitados no penalizan el score, **Jupiter v6**, **GoPlus/CMC con headers**, y chequeos r√°pidos (Helius, QuickNode, DexScreener, Raydium, Gecko, etc.).  
- **/control** tablero visual limpio (hoy): descubiertos ‚Üí pools ‚Üí seguridad ‚Üí filtros duros ‚Üí candidatos ‚Üí ejecuciones/TP/Stops, capital DEMO/REAL, PnL no realizado (abiertos) + PnL realizado (cerradas), acumulados semana/mes, operativa (latencias/errores), y botones [Actualizar][AUTO].
- **/registro** pulido: cards con **links clicables** por token (DexScreener/Solscan), **fecha es-AR**, **resumen del d√≠a** (cerradas, invertido, PnL, libre) y bot√≥n a **Sheets del mes** o pesta√±a fija seg√∫n `SHEETS_TAB_MODE`.
- **/wallet** resumen pro: libre/invertido/total, abiertos con precio entrada/actual y PnL no realizado, PnL cerradas (hoy/semana/mes).  
- **Sheets**: creaci√≥n/uso de pesta√±as **mensuales** auto (`DEMO_Sep_2025`, etc.) con encabezados y fecha local; fallback a pesta√±a fija `DEMO`/`REAL` si se desea.
- **Supabase**: helper `sumClosedPnL({mode, fromDay, toDay})` para /wallet y /registro.
- **inlinePnlSell**: deduplicaci√≥n de `recordClose`, clamp de ventas parciales, refresh de tarjeta tras venta, y saneo de returns/async sueltos.
- **Men√∫ slash** preparado (cuando se configure token y setMyCommands) con: `/salud /control /estado /autosniper /real /demo /stop /wallet /registro /ajustes /mensaje`.

## ENV hoy recomendado (extracto)
- Zona horaria: `HX_TZ` y `TZ = America/Argentina/Buenos_Aires`.
- Sheets: `GOOGLE_APPLICATION_CREDENTIALS`, `GOOGLE_SHEETS_ID`, `SHEETS_TAB_MODE=monthly`.
- Supabase: `SUPABASE_URL`, `SUPABASE_ANON_KEY`, `SUPABASE_SERVICE_ROLE`, `SUPABASE_TABLE_DEMO`, `SUPABASE_TABLE_REAL`.
- Proveedores: `HELIUS_RPC_URL`, `QUICKNODE_URL`, `GOPLUS_API_KEY`, `CMC_API_KEY` (o PRO), `REDIS_URL` (si us√°s cache).
- M4 demo loop: `M4_AUTOBUY_DEMO=1`, `M4_SOURCES=gecko,raydium`, `M4_SCAN_LIMIT=40`, `M4_MIN_LIQ_USD=15000`, `M4_MAX_FDV_USD=800000`.

## Cambios notables de hoy
- Normalizaci√≥n de **dotenv** (una sola carga; fuera `-r dotenv/config`).
- **/salud**: mejor presentaci√≥n, orden, y robustez; a√±ade ‚ÄúDeshabilitados (no punt√∫an)‚Äù.
- **/control**: layout exacto al dise√±o; botones solo para [Actualizar][AUTOüü¢]; sin duplicar enlaces en texto.
- Correcciones de errores puntuales (regex, ‚Äúasync is not defined‚Äù, ‚ÄúIllegal return‚Äù, ‚ÄúsendReceipt is not defined‚Äù).
- Verificaci√≥n de **.env** (claves visibles para el proceso), y gu√≠a para Redis URL ‚Äúredis://‚Äù.

## Pasos siguientes (no incluidos en esta release)
- Conectar **Web Service** + **Worker** (Render/VPS) y habilitar auto-refresh server-side.
- Integrar **GoPlus** a los filtros duros de entrada (ya hay headers; falta cableado al loop).
- Entrenamiento IA (offline/sombra) y tuning de trailing/TPs por perfil.
